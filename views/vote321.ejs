<!--Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>
<head>
    <title>Man of the Match | Game App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Shoppy Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all">
    <!-- Custom Theme files -->
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <!--js-->
    <script src="js/jquery-2.1.1.min.js"></script>
    <!--icons-css-->
    <link href="css/font-awesome.css" rel="stylesheet">
    <!--Google Fonts-->
    <link href='//fonts.googleapis.com/css?family=Carrois+Gothic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Work+Sans:400,500,600' rel='stylesheet' type='text/css'>
    <!--static chart-->
    <script src="js/Chart.min.js"></script>
    <!--//charts-->

    <!--skycons-icons-->
    <script src="js/skycons.js"></script>
    <!--//skycons-icons-->
</head>
<body>
<div class="page-container">
    <div class="left-content">
        <div class="mother-grid-inner">
            <!--header start here-->
            <div class="header-main">
                <div class="header-left">
                    <div class="logo-name">
                        <a href="index.html"> <h1>Man of the Match</h1>
                            <!--<img id="logo" src="" alt="Logo"/>-->
                        </a>
                    </div>
                    <!--search-box-->
                    <!-- <div class="search-box">
                      <form>
                        <input type="text" placeholder="Search..." required="">
                        <input type="submit" value="">
                      </form>
                    </div> --><!--//end-search-box-->
                    <div class="clearfix"> </div>
                </div>
                <div class="header-right">
                    <div class="profile_details_left"><!--notifications of menu start -->
                        <ul class="nofitications-dropdown">
                            <li class="dropdown head-dpdn">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-envelope"></i><span class="badge">3</span></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <div class="notification_header">
                                            <h3>You have 3 new messages</h3>
                                        </div>
                                    </li>
                                    <li><a href="#">
                                            <div class="user_img"><img src="images/p4.png" alt=""></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li class="odd"><a href="#">
                                            <div class="user_img"><img src="images/p2.png" alt=""></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor </p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="user_img"><img src="images/p3.png" alt=""></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li>
                                        <div class="notification_bottom">
                                            <a href="#">See all messages</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li class="dropdown head-dpdn">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bell"></i><span class="badge blue">3</span></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <div class="notification_header">
                                            <h3>You have 3 new notification</h3>
                                        </div>
                                    </li>
                                    <li><a href="#">
                                            <div class="user_img"><img src="images/p5.png" alt=""></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li class="odd"><a href="#">
                                            <div class="user_img"><img src="images/p6.png" alt=""></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="user_img"><img src="images/p7.png" alt=""></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li>
                                        <div class="notification_bottom">
                                            <a href="#">See all notifications</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li class="dropdown head-dpdn">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-tasks"></i><span class="badge blue1">9</span></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <div class="notification_header">
                                            <h3>You have 8 pending task</h3>
                                        </div>
                                    </li>
                                    <li><a href="#">
                                            <div class="task-info">
                                                <span class="task-desc">Database update</span><span class="percentage">40%</span>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="progress progress-striped active">
                                                <div class="bar yellow" style="width:40%;"></div>
                                            </div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="task-info">
                                                <span class="task-desc">Dashboard done</span><span class="percentage">90%</span>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="progress progress-striped active">
                                                <div class="bar green" style="width:90%;"></div>
                                            </div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="task-info">
                                                <span class="task-desc">Mobile App</span><span class="percentage">33%</span>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="progress progress-striped active">
                                                <div class="bar red" style="width: 33%;"></div>
                                            </div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="task-info">
                                                <span class="task-desc">Issues fixed</span><span class="percentage">80%</span>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="progress progress-striped active">
                                                <div class="bar  blue" style="width: 80%;"></div>
                                            </div>
                                        </a></li>
                                    <li>
                                        <div class="notification_bottom">
                                            <a href="#">See all pending tasks</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <div class="clearfix"> </div>
                    </div>
                    <!--notification menu end -->
                    <div class="profile_details">
                        <ul>
                            <li class="dropdown profile_details_drop">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                    <div class="profile_img">
                                        <span class="prfil-img"><img src="images/p1.png" alt=""> </span>
                                        <div class="user-name">
                                            <p>Malorum</p>
                                            <span>Administrator</span>
                                        </div>
                                        <i class="fa fa-angle-down lnr"></i>
                                        <i class="fa fa-angle-up lnr"></i>
                                        <div class="clearfix"></div>
                                    </div>
                                </a>
                                <ul class="dropdown-menu drp-mnu">
                                    <li> <a href="#"><i class="fa fa-cog"></i> Settings</a> </li>
                                    <li> <a href="#"><i class="fa fa-user"></i> Profile</a> </li>
                                    <li> <a href="#"><i class="fa fa-sign-out"></i> Logout</a> </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="clearfix"> </div>
                </div>
                <div class="clearfix"> </div>
            </div>
            <!--heder end here-->
            <!-- script-for sticky-nav -->
            <script>
                $(document).ready(function() {
                    var navoffeset=$(".header-main").offset().top;
                    $(window).scroll(function(){
                        var scrollpos=$(window).scrollTop();
                        if(scrollpos >=navoffeset){
                            $(".header-main").addClass("fixed");
                        }else{
                            $(".header-main").removeClass("fixed");
                        }
                    });

                });
            </script>
            <!-- /script-for sticky-nav -->
            <!--inner block start here-->
            <div class="inner-block">
                <!--market updates updates-->
                <div class="market-updates">
                    <div class="col-md-4 market-update-gd">
                        <div class="market-update-block clr-block-1">
                            <div class="col-md-8 market-update-left">
                                <h3><%= users.length %></h3>
                                <h4>Registered User</h4>
                                <p>Other hand, we denounce</p>
                            </div>
                            <div class="col-md-4 market-update-right">
                                <i class="fa fa-file-text-o"> </i>
                            </div>
                            <div class="clearfix"> </div>
                        </div>
                    </div>
                    <div class="col-md-4 market-update-gd">
                        <div class="market-update-block clr-block-2">
                            <div class="col-md-8 market-update-left">
                                <h3><%= stat.gamesPlayed %></h3>
                                <h4>Games Played</h4>
                                <p>Other hand, we denounce</p>
                            </div>
                            <div class="col-md-4 market-update-right">
                                <i class="fa fa-eye"> </i>
                            </div>
                            <div class="clearfix"> </div>
                        </div>
                    </div>
                    <div class="col-md-4 market-update-gd">
                        <div class="market-update-block clr-block-3">
                            <div class="col-md-8 market-update-left">
                                <h3>23</h3>
                                <h4>Goals Scored</h4>
                                <p>Other hand, we denounce</p>
                            </div>
                            <div class="col-md-4 market-update-right">
                                <i class="fa fa-envelope-o"> </i>
                            </div>
                            <div class="clearfix"> </div>
                        </div>
                    </div>
                    <div class="clearfix"> </div>
                </div>
                <!--market updates end here-->
                <!--mainpage chit-chating-->
                <div class="chit-chat-layer1">
                    <div class="col-md-12 chit-chat-layer1-left">
                        <div class="chsit-chat-heading">
                            Vote Man of the Match
                        </div>
                        <form>
                            <div class="form-group">
                                <label for="gameSelector">Game:</label>
                                <select id="game" class="form-control">
                                    <option disabled selected value> -- Select a game -- </option>
                                    <%
                                    games.forEach(function(game) {

                                    %> <option value="<%= game._id %>"> <%= game.number %> <%= game.oponent %> <%= game.gameday %> </option> <%
                                    });
                                    %>

                                </select>
                            </div>
                            <div id="votingGroup">
                            <div class="form-group">

                                <label for="voterSelector">Voter:</label>
                                <select id="voter" class="form-control">
                                    <%
                                    players.forEach(function(player) {

                                    %> <option value="<%= player._id %>"> <%= player.firstname %> <%= player.lastname %> </option> <%
                                    });
                                    %>

                                </select>
                            </div>
                            <div class="form-group">

                                <label for="goldSelector">Gold (3pts):</label>
                                <select id="gold" class="form-control">
                                    <%
                                    players.forEach(function(player) {

                                    %> <option value="<%= player._id %>"> <%= player.firstname %> <%= player.lastname %> </option> <%
                                    });
                                    %>

                                </select>
                            </div>
                            <div class="form-group">

                                <label for="silverSelector">Silver (2pts):</label>
                                <select id="silver" class="form-control">
                                    <%
                                    players.forEach(function(player) {

                                    %> <option value="<%= player._id %>"> <%= player.firstname %> <%= player.lastname %> </option> <%
                                    });
                                    %>

                                </select>
                            </div>
                            <div class="form-group">

                                <label for="bronzeSelector">Bronze (1pt):</label>
                                <select id="bronze" class="form-control">
                                    <%
                                    players.forEach(function(player) {

                                    %> <option value="<%= player._id %>"> <%= player.firstname %> <%= player.lastname %> </option> <%
                                    });
                                    %>

                                </select>
                            </div>
                            </div>
                            <button id="button_vote" style="display: none" type="button" class="btn btn-primary">Vote</button>
                            <button id="button_not_played" style="display: none" type="button" class="btn btn-danger">Not played</button>
                            <button id="button_results" style="display: none" type="button" class="btn btn-primary">Show Results</button>
                        </form>

                    </div>
                    <div class="clearfix"> </div>
                </div>


                <!--climate end here-->
            </div>
            <!--inner block end here-->
            <!--copy rights start here-->
            <div class="copyrights">
                <p>Â© 2016 Shoppy. All Rights Reserved | Design by  <a href="http://w3layouts.com/" target="_blank">W3layouts</a> </p>
            </div>
            <!--COPY rights end here-->
        </div>
    </div>
    <!--slider menu-->
    <div class="sidebar-menu">
        <div class="logo"> <a href="#" class="sidebar-icon"> <span class="fa fa-bars"></span> </a> <a href="#"> <span id="logo" ></span>
                <!--<img id="logo" src="" alt="Logo"/>-->
            </a> </div>
        <div class="menu">
            <ul id="menu" >
                <li id="menu-home" >
                    <a href="portal">
                        <i class="fa fa-tachometer"></i><span>Dashboard</span>
                    </a>
                </li>
                <li id="menu-home" >
                    <a href="vote321">
                        <i class="fa fa-tachometer"></i><span>Vote 3-2-1</span>
                    </a>
                </li>
                <li id="menu-home" >
                    <a href="statistics?game=all">
                        <i class="fa fa-tachometer"></i><span>Reports</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="clearfix"> </div>
</div>
<!--slide bar menu end here-->


<script>


    $('#button_not_played').on('click', function(event) {
        var button = $(event.relatedTarget); // Button that triggered the modal

        var voteObj = {
            game: $('#game').val(),
            voter: $('#voter').val(),
            not_played: true
        }
        console.log(voteObj)

        $.ajax({
            type:'PUT',
            url: '/createVote',
            data: voteObj
        }).done(function(response) {
            console.log(response);

            $('#voter')
                .find('option')
                .remove()
                .end()

            response.forEach(function (player) {
                $ ('#voter').append($('<option>', {
                    value: player._id,
                    text: player.firstname + " " + player.lastname
                }));
            });

            if (response.length == 0) {
                $("#button_vote").css("display","none");
                $("#votingGroup").css("display","none");
                $("#button_not_played").css("display","none");
                $("#button_results").css("display","inline");
            }

        }).fail(function(response){
            console.log("Oops not working");
        });


    });

    $('#button_results').on('click', function(event) {
        var button = $(event.relatedTarget); // Button that triggered the modal
        window.location.replace("statistics?game=" + $("#game").val());
    });

    $('#button_vote').on('click', function(event) {
        var button = $(event.relatedTarget); // Button that triggered the modal

        var voteObj = {
            game: $('#game').val(),
            voter: $('#voter').val(),
            gold: $('#gold').val(),
            silver: $('#silver').val(),
            bronze: $('#bronze').val()
        }
        console.log(voteObj)

        $.ajax({
            type:'PUT',
            url: '/createVote',
            data: voteObj
        }).done(function(response) {
            console.log(response);

            $('#voter')
                .find('option')
                .remove()
                .end()

            response.forEach(function (player) {
                $ ('#voter').append($('<option>', {
                    value: player._id,
                    text: player.firstname + " " + player.lastname
                }));
            });

            if (response.length == 0) {
                $("#button_vote").css("display","none");
                $("#votingGroup").css("display","none");
                $("#button_not_played").css("display","none");
                $("#button_results").css("display","inline");
            }

        }).fail(function(response){
            console.log("Oops not working");
        });


    });

    $('#game').on('change', function() {

        $('#voter')
            .find('option')
            .remove()
            .end()

        var url = "/getVoter";
        $.ajax({
            type:'GET',
            url: url,
            data: {
                game:this.value,
            }
        }).done(function(response){

            console.log(response);
            if (response.players.length == 0 && response.votes.length != 0) {
                $("#button_vote").css("display","none");
                $("#votingGroup").css("display","none");
                $("#button_not_played").css("display","none");
                $("#button_results").css("display","inline");
            } else {
                $("#button_vote").css("display","inline");
                $("#votingGroup").css("display","block");
                $("#button_not_played").css("display","inline");
                $("#button_results").css("display","none");
            }
            response.players.forEach(function (player) {
               $ ('#voter').append($('<option>', {
                   value: player._id,
                   text: player.firstname + " " + player.lastname
               }));
            });


        }).fail(function(response){
            console.log("Oops not working");
        });
    });

    $('#shirtSelector').on( 'click', 'a', function() {

        $('#npshirt').val($(this).html())
    });

    $('#modalUpdatePlayer').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget); // Button that triggered the modal

        var userObj = {
            _id: button.data('_id'),
            shirt: button.data('shirt'),
            firstname: button.data('firstname'),
            lastname: button.data('lastname'),
            dob: button.data('dob'),
            email: button.data('email'),
            mobile: button.data('mobile')
        }

        var modal = $(this)
        modal.find('.modal-title').text('Update Player # ' + userObj.shirt)
        modal.find('#mupshirt').val(userObj.shirt)
        modal.find('#mupfirstname').val(userObj.firstname)
        modal.find('#muplastname').val(userObj.lastname)
        modal.find('#mupdob').val(userObj.dob)
        modal.find('#mupemail').val(userObj.email)
        modal.find('#mupmobile').val(userObj.mobile)
        modal.find('#mup_id').val(userObj._id)
    })

    $('#modalUpdateGame').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget); // Button that triggered the modal

        var gameObj = {
            _id: button.data('_id'),
            number: button.data('number'),
            location: button.data('location'),
            oponent: button.data('oponent'),
            homegame: button.data('homegame'),
            result: button.data('result'),
            goalsscored: button.data('goalsscored'),
            goalsconceded: button.data('goalsconceded'),
            gameday:button.data('gameday')
            // mobile: button.data('mobile')
        }
        // alert("GAME "+JSON.stringify(gameObj))
        var modal = $(this)
        modal.find('.modal-title').text('Update Player # ' + gameObj.number)
        modal.find('#ug_number').val(gameObj.number)
        modal.find('#ug_gameday').val(gameObj.gameday)
        modal.find('#ug_location').val(gameObj.location)
        modal.find('#ug_result').val(gameObj.result)
        modal.find('#ug_homegame').val(gameObj.homegame)
        modal.find('#ug_oponent').val(gameObj.oponent)
        // modal.find('#mupfirstname').val(userObj.firstname)
        // modal.find('#muplastname').val(userObj.lastname)
        // modal.find('#mupdob').val(userObj.dob)
        // modal.find('#mupemail').val(userObj.email)
        // modal.find('#mupmobile').val(userObj.mobile)
        modal.find('#ug_id').val(gameObj._id)
    })

    $('#ug_save').on('click', function() {

        console.log("UG Save")
        $.ajax({
            type:'PUT',
            url: '/updateGame',
            data: {
                _id:$('#ug_id').val(),
                goalsscored:$('#ug_goalsscored').val(),

                goalsconceded: $('#ug_goalsconceded').val()
            }
        }).done(function(response){
            console.log(response);
            // window.location.replace('http://localhost:3030/');
        }).fail(function(response){
            console.log("Oops not working");
        });

        //$('#value').text( $('#newGoal').val() );
        $('#modalUpdateGame').modal('hide');
        return false;
    });

    $('#mdpdelete').on('click', function() {

        console.log("Delete Player")
        $.ajax({
            type:'PUT',
            url: '/deletePlayer/',
            data: {
                _id:$('#dp_id').val()
            }
        }).done(function(response){
            console.log(response);
            // window.location.replace('http://localhost:3030/');
        }).fail(function(response){
            console.log("Oops not working");
        });

        //$('#value').text( $('#newGoal').val() );
        $('#modalDeletePlayer').modal('hide');
        return false;
    });

    $('#modalDeletePlayer').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget); // Button that triggered the modal

        var userObj = {
            _id: button.data('_id'),
            shirt: button.data('shirt'),
            firstname: button.data('firstname'),
            lastname: button.data('lastname'),
            dob: button.data('dob'),
            email: button.data('email'),
            mobile: button.data('mobile')
        }

        var modal = $(this)
        modal.find('.modal-title').text('Delete Player # ' + userObj.shirt + " (" + userObj.firstname + " " + userObj.lastname + ")")
        modal.find('#dp_id').val(userObj._id)
    })


    $('#mupsave').on('click', function() {

        console.log("MUP Save")
        $.ajax({
            type:'PUT',
            url: '/updatePlayer',
            data: {
                _id:$('#mup_id').val(),
                shirt:$('#mupshirt').val(),
                firstname: $('#mupfirstname').val(),
                lastname: $('#muplastname').val(),
                dob: $('#mupdob').val(),
                email: $('#mupemail').val(),
                mobile: $('#mupmobile').val()
            }
        }).done(function(response){
            console.log(response);
            // window.location.replace('http://localhost:3030/');
        }).fail(function(response){
            console.log("Oops not working");
        });

        //$('#value').text( $('#newGoal').val() );
        $('#modalUpdatePlayer').modal('hide');
        return false;
    });




    $('#npsave').on('click', function() {
        var validated = true;
        if ($('#npmobile').val() == '') {
            validated = false;
            $('#npmobile').attr("placeholder", "Please enter a mobile number");
        }
        if ($('#npfirstname').val() == '') {
            validated = false;
            $('#npfirstname').attr("placeholder", "Please enter a name");
        }
        if ($('#nplastname').val() == '') {
            validated = false;
            $('#nplastname').attr("placeholder", "Please enter a name");
        }
        if ($('#npdob').val() == '') {
            validated = false;
            $('#npdob').attr("placeholder", "Please enter a date of birth");
        }
        if ($('#npmobile').val() == '') {
            validated = false;
            $('#npmobile').attr("placeholder", "Please enter a phone number");
        }
        if ($('#npemail').val() == '') {
            validated = false;
            $('#npemail').attr("placeholder", "Please enter an email address");
        }
        if ($('#npshirt').val() == '') {
            validated = false;
            $('#npshirt').attr("placeholder", "Please select a shirt number");
        }
        if (!validated) {
            return false;
        }

        console.log("CP Save")
        $.ajax({
            type:'PUT',
            url: '/newPlayer/',
            data: {
                shirt:$('#npshirt').val(),
                firstname: $('#npfirstname').val(),
                lastname: $('#nplastname').val(),
                dob: $('#npdob').val(),
                email: $('#npemail').val(),
                mobile: $('#npmobile').val()
            }
        }).done(function(response){
            console.log(response);
            // window.location.replace('http://localhost:3030/');
        }).fail(function(response){
            console.log("Oops not working");
        });

        //$('#value').text( $('#newGoal').val() );
        $('#modalNewPlayer').modal('hide');
        return false;
    });


    var toggle = true;

    $(".sidebar-icon").click(function() {
        if (toggle)
        {
            $(".page-container").addClass("sidebar-collapsed").removeClass("sidebar-collapsed-back");
            $("#menu span").css({"position":"absolute"});
        }
        else
        {
            $(".page-container").removeClass("sidebar-collapsed").addClass("sidebar-collapsed-back");
            setTimeout(function() {
                $("#menu span").css({"position":"relative"});
            }, 400);
        }
        toggle = !toggle;
    });
</script>
<!--scrolling js-->
<script src="js/jquery.nicescroll.js"></script>
<script src="js/scripts.js"></script>
<!--//scrolling js-->
<script src="js/bootstrap.js"> </script>

<!-- mother grid end here-->
</body>
</html>